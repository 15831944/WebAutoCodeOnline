<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Cache-Control" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="description" content="BootStrap在线代码自动生成" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="我要调试,51调试,51debug,C#在线代码生成器" name="Keywords" />
    <meta name="description" content="51debug是程序员的好助手，帮助各种程序员进行快速开发，提高开发效率和分享代码库" />
    <title>我要调试 - BootStrap代码自动生成</title>

    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="../js/bootstrap-3.3.0-dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- 可选的Bootstrap主题文件（一般不使用） -->
    <link href="../js/bootstrap-3.3.0-dist/css/bootstrap-theme.min.css" rel="stylesheet" />

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="../js/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="../js/bootstrap-3.3.0-dist/js/bootstrap.min.js"></script>

    <!-- 初始化界面js -->
    <script src="../js/load.js?20161108_2"></script>
</head>
<body>
    <!-- 导航 -->
    <div id="nav"></div>

    <div class="container">
        <h2>BootStrap代码自动生成
        </h2>
        <div class="row">
            <p>
            </p>
            <div class="col-md-12">

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">创建表sql
                            <label class="checkbox-inline">
                                <input type="radio" name="optionsRadiosinline" id="rbtnmssql"
                                    value="mssql" checked>
                                MSSQL
                            </label>
                            <label class="checkbox-inline">
                                <input type="radio" name="optionsRadiosinline" id="rbtnmysql"
                                    value="mysql">
                                MySQL
                            </label>
                            <span class="label label-info btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">参考样例</span>
                        </h3>
                    </div>
                    <div class="panel-body">
                        <p>
                            <textarea id="txtsql" class="form-control" rows="8"></textarea>
                        </p>
                    </div>
                </div>
                <div class="panel panel-default">
                    <!--<div class="panel-heading">
                        <h3 class="panel-title">操作
                        </h3>
                    </div>-->
                    <div class="panel-body">
                        <form class="form-horizontal" role="form">
                            <div class="form-group">
                                <label for="txtnamespace" class="col-sm-2 control-label">命名空间：</label>
                                <div class="col-sm-2">
                                    <input type="text" class="form-control" id="txtnamespace"
                                        placeholder="命名空间">
                                </div>
                                <label for="txtdbname" class="col-sm-2 control-label">数据库名：</label>
                                <div class="col-sm-2">
                                    <input type="text" class="form-control" id="txtdbname"
                                        placeholder="数据库名">
                                </div>
                                <div class="col-sm-4">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" id="chkadd" value="1">
                                        新增
                                    </label>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" id="chkdelete" value="2">
                                        删除
                                    </label>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" id="chkedit" value="3">
                                        编辑
                                    </label>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" id="chkbatdelete" value="4">
                                        批量删除
                                    </label>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" id="chkexport" value="5">
                                        导出
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="txtadd" class="col-sm-2 control-label">添加列：</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="txtadd"
                                        placeholder="(添加列)a,b,c">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="txtsearch" class="col-sm-2 control-label">查询列：</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="txtsearch"
                                        placeholder="(查询列)a,b,c">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="txtedit" class="col-sm-2 control-label">编辑列：</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="txtedit"
                                        placeholder="(编辑列)a,b,c">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="txtbatedit" class="col-sm-2 control-label">批量编辑列：</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="txtbatedit"
                                        placeholder="(批量编辑列)a,b,c">
                                </div>
                                <div class="col-sm-2 text-right">
                                    <button onclick="dosubmit();" type="button" class="btn btn-default">生成代码</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <link href="../js/codehighlight/SyntaxHighlighter.css" rel="stylesheet" />
                <script src="../js/codehighlight/shCore.js"></script>
                <script src="../js/codehighlight/shBrushCSharp.js"></script>
                <script type="text/javascript">
                    function dosubmit() {
                        var dbtype = $("#rbtnmssql")[0].checked ? "0" : "1";
                        var text = encodeURI($("#txtsql").val());
                        var namespace = encodeURI($("#txtnamespace").val());
                        var dbname = encodeURI($("#txtdbname").val());
                        var txtadd = encodeURI($("#txtadd").val());
                        var txtsearch = encodeURI($("#txtsearch").val());
                        var txtedit = encodeURI($("#txtedit").val());
                        var txtbatedit = encodeURI($("#txtbatedit").val());
                        var chkadd = $("#chkadd")[0].checked ? "0" : "1";
                        var chkdelete = $("#chkdelete")[0].checked ? "0" : "1";
                        var chkedit = $("#chkedit")[0].checked ? "0" : "1";
                        var chkbatdelete = $("#chkbatdelete")[0].checked ? "0" : "1";
                        var chkexport = $("#chkexport")[0].checked ? "0" : "1";
                        $.post("../Api.ashx",
                            {
                                "type": "bootstrap", "dbtype": dbtype, "sql": text, "namespace": namespace, "dbname": dbname,
                                "txtadd": txtadd, "txtsearch": txtsearch, "txtedit": txtedit, "txtbatedit": txtbatedit,
                                "chkadd": chkadd, "chkdelete": chkdelete, "chkedit": chkedit, "chkbatdelete": chkbatdelete, "chkexport": chkexport
                            },
                            function (data) {
                                $("#pclass").empty();
                                $("#pclass").html("<textarea id=\"txtclass\" name=\"txtclass\" class=\"form-control csharp\" rows=\"10\"></textarea>");
                                $("#paspx").empty();
                                $("#paspx").html("<textarea id=\"txtaspx\" name=\"txtaspx\" class=\"form-control csharp\" rows=\"10\"></textarea>");
                                $("#paspxcs").empty();
                                $("#paspxcs").html("<textarea id=\"txtaspxcs\" name=\"txtaspxcs\" class=\"form-control csharp\" rows=\"10\"></textarea>");
                                $("#pdal").empty();
                                $("#pdal").html("<textarea id=\"txtdal\" name=\"txtdal\" class=\"form-control csharp\" rows=\"10\"></textarea>");
                                $("#pfactory").empty();
                                $("#pfactory").html("<textarea id=\"txtfactory\" name=\"txtfactory\" class=\"form-control csharp\" rows=\"10\"></textarea>");

                                $("#txtclass").text(data.ClassStr);
                                $("#txtaspx").text(data.AspxStr);
                                $("#txtaspxcs").text(data.AspxCsStr);
                                $("#txtdal").text(data.DALStr);
                                $("#txtfactory").text(data.FactoryStr);

                                // 用于 download zip
                                $("#hidGuid").val(data.Guid);
                                // alert(data.Guid);

                                dp.SyntaxHighlighter.HighlightAll('txtclass');
                                dp.SyntaxHighlighter.HighlightAll('txtaspx');
                                dp.SyntaxHighlighter.HighlightAll('txtaspxcs');
                                dp.SyntaxHighlighter.HighlightAll('txtdal');
                                dp.SyntaxHighlighter.HighlightAll('txtfactory');
                            }
                       , "json");
                    }
                </script>
                <ul id="myTab" class="nav nav-tabs">
                    <li class="active"><a href="#class" data-toggle="tab">类代码</a>
                    </li>
                    <li><a href="#aspx" data-toggle="tab">ASPX页面</a></li>
                    <li><a href="#aspxcs" data-toggle="tab">ASPX.CS页面</a></li>
                    <li><a href="#dal" data-toggle="tab">DAL类</a></li>
                    <li><a href="#factory" data-toggle="tab">工厂类</a></li>
                    <li><a href="#helperdownload" data-toggle="tab">Helper下载</a></li>
                    <li class="pull-right right">
                        <input type="hidden" id="hidGuid" /><a onclick="downZip();" class="navbar-right" style="cursor: pointer;">Zip下载</a></li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade in active" id="class">
                        <p id="pclass">
                            <textarea id="txtclass" name="txtclass" class="form-control csharp" rows="10"></textarea>
                        </p>
                    </div>
                    <div class="tab-pane fade" id="aspx">
                        <p id="paspx">
                            <textarea id="txtaspx" name="txtaspx" class="form-control csharp" rows="10"></textarea>
                        </p>
                    </div>
                    <div class="tab-pane fade" id="aspxcs">
                        <p id="paspxcs">
                            <textarea id="txtaspxcs" name="txtaspxcs" class="form-control csharp" rows="10"></textarea>
                        </p>
                    </div>
                    <div class="tab-pane fade" id="dal">
                        <p id="pdal">
                            <textarea id="txtdal" name="txtdal" class="form-control csharp" rows="10"></textarea>
                        </p>
                    </div>
                    <div class="tab-pane fade" id="factory">
                        <p id="pfactory">
                            <textarea id="txtfactory" name="txtfactory" class="form-control csharp" rows="10"></textarea>
                        </p>
                    </div>
                    <div class="tab-pane fade" id="helperdownload">
                        <p>
                            <ul class="list-group">
                                <li class="list-group-item"><a href="../Down.ashx?cs=sqlhelper">SqlHelper.cs</a></li>
                                <li class="list-group-item"><a href="../down.ashx?cs=mysqlhelper">MySqlHelper.cs</a></li>
                                <li class="list-group-item"><a href="../down.ashx?cs=sqlitehelper">SqliteHelper.cs</a></li>
                            </ul>
                        </p>
                    </div>
                </div>
                <script>
                    $(function () {
                        $('#myTab li:eq(0) a').tab('show');
                    });

                    function downZip() {
                        var guid = $("#hidGuid").val();
                        document.location.href = "../Down.ashx?type=zip&guid=" + guid;
                    }
                </script>
            </div>
        </div>
    </div>

    <!-- 模态框（Modal） -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog"
        aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width: auto; max-width: 1200px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">样例
                    </h4>
                </div>
                <div class="modal-body">
                    <img src="../image/lizi/easyui.jpg" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"
                        data-dismiss="modal">
                        关闭
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
    </div>

    <!-- 站点地图&友情链接 -->
    <div id="sitemap"></div>

    <!-- Fotter -->
    <div id="fotter"></div>
</body>
</html>
